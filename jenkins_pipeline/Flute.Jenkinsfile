
pipeline {
    agent any
    stages {
        stage('Git Clone') {
            steps {
                sh 'rm -rf *.xml'
                sh 'rm -rf Flute'
                sh 'git clone --recursive --depth=1 https://github.com/bluespec/Flute Flute'
            }
        }

        

        stage('Simulation') {
            steps {
                dir("Flute") {
                    sh "iverilog -o simulation.out -g2005                  -s   builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkAXI4_Deburster_A.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkBoot_ROM.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkBranch_Predictor.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkCPU.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkCSR_MIE.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkCSR_MIP.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkCSR_RegFile.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkCore.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkFabric_2x3.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkFabric_AXI4.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkGPR_RegFile.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkMMU_Cache.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkMem_Controller.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkMem_Model.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkNear_Mem.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkPLIC_16_2_7.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkSoC_Map.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkSoC_Top.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkTop_HW_Side.v builds/Flute_RV32CI_MU_WT_L1_iverilog_tohost/Verilog_RTL/mkUART.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkAXI4_Deburster_A.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkBoot_ROM.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkBranch_Predictor.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkCPU.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkCSR_MIE.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkCSR_MIP.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkCSR_RegFile.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkCache.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkCore.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkDMA_Cache.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkD_MMU_Cache.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkFBox_Core.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkFBox_Top.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkFPR_RegFile.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkFPU.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkFabric_1x3.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkFabric_AXI4.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkGPR_RegFile.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkI_MMU_Cache.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkIntMul_32.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkIntMul_64.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkLLCache.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkLLPipeline.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkLastLvCRqMshr.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkMMIO.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkMMIO_AXI4_Adapter_2.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkMem_Controller.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkMem_Model.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkNear_Mem.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkPLIC_16_2_7.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkPTW.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkRISCV_MBox.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkSoC_Map.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkSoC_Top.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkTLB.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkTop_HW_Side.v builds/Flute_RV64GC_MSU_WB_L1_L2_verilator_tohost/Verilog_RTL/mkUART.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkAXI4_Deburster_A.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkBoot_ROM.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkBranch_Predictor.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCPU.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCSR_MIE.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCSR_MIP.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCSR_RegFile.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCore.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFBox_Core.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFBox_Top.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFPR_RegFile.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFPU.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFabric.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFabric_2x3.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFabric_AXI4.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkGPR_RegFile.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkIntMul_32.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkIntMul_64.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkMMU_Cache.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkMem_Controller.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkMem_Model.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkNear_Mem.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkPLIC_16_2_7.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkRISCV_FBox.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkRISCV_MBox.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkSoC_Map.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkSoC_Top.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkTLB.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkTop_HW_Side.v builds/RV32ACDFIMSU_Flute_iverilog/Verilog_RTL/mkUART.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkAXI4_Deburster_A.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkBoot_ROM.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkBranch_Predictor.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkCPU.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkCSR_MIE.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkCSR_MIP.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkCSR_RegFile.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkCore.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkFBox_Core.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkFBox_Top.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkFPR_RegFile.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkFPU.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkFabric.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkFabric_2x3.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkFabric_AXI4.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkGPR_RegFile.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkIntMul_32.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkIntMul_64.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkMMU_Cache.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkMem_Controller.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkMem_Model.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkNear_Mem.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkNear_Mem_IO.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkPLIC_16_2_7.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkRISCV_FBox.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkRISCV_MBox.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkSoC_Map.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkSoC_Top.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkTLB.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkTop_HW_Side.v builds/RV32ACDFIMSU_Flute_verilator/Verilog_RTL/mkUART.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkAXI4_Deburster_A.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkBoot_ROM.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkBranch_Predictor.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkCPU.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkCSR_MIE.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkCSR_MIP.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkCSR_RegFile.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkCore.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkFabric.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkFabric_2x3.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkFabric_AXI4.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkGPR_RegFile.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkIntMul_32.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkIntMul_64.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkMMU_Cache.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkMem_Controller.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkMem_Model.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkNear_Mem.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkPLIC_16_2_7.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkRISCV_MBox.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkSoC_Map.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkSoC_Top.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkTop_HW_Side.v builds/RV32ACIMU_Flute_iverilog/Verilog_RTL/mkUART.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkAXI4_Deburster_A.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkBoot_ROM.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkBranch_Predictor.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkCPU.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkCSR_MIE.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkCSR_MIP.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkCSR_RegFile.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkCore.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkFabric.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkFabric_2x3.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkFabric_AXI4.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkGPR_RegFile.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkIntMul_32.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkIntMul_64.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkMMU_Cache.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkMem_Controller.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkMem_Model.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkNear_Mem.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkNear_Mem_IO.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkPLIC_16_2_7.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkRISCV_MBox.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkSoC_Map.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkSoC_Top.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkTop_HW_Side.v builds/RV32ACIMU_Flute_verilator/Verilog_RTL/mkUART.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkAXI4_Deburster_A.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkBoot_ROM.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkBranch_Predictor.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCPU.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCSR_MIE.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCSR_MIP.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCSR_RegFile.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkCore.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFBox_Core.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFBox_Top.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFPR_RegFile.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFPU.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFabric.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFabric_2x3.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkFabric_AXI4.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkGPR_RegFile.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkIntMul_32.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkIntMul_64.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkMMU_Cache.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkMem_Controller.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkMem_Model.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkNear_Mem.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkPLIC_16_2_7.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkRISCV_FBox.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkRISCV_MBox.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkSoC_Map.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkSoC_Top.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkTLB.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkTop_HW_Side.v builds/RV64ACDFIMSU_Flute_iverilog/Verilog_RTL/mkUART.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkAXI4_Deburster_A.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkBoot_ROM.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkBranch_Predictor.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkCPU.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkCSR_MIE.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkCSR_MIP.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkCSR_RegFile.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkCore.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkFBox_Core.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkFBox_Top.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkFPR_RegFile.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkFPU.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkFabric.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkFabric_2x3.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkFabric_AXI4.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkGPR_RegFile.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkIntMul_32.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkIntMul_64.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkMMU_Cache.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkMem_Controller.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkMem_Model.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkNear_Mem.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkPLIC_16_2_7.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkRISCV_MBox.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkSoC_Map.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkSoC_Top.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkTLB.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkTop_HW_Side.v builds/RV64ACDFIMSU_Flute_verilator/Verilog_RTL/mkUART.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkBoot_ROM.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkBranch_Predictor.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkCPU.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkCSR_MIE.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkCSR_MIP.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkCSR_RegFile.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkCore.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkFabric.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkFabric_2x3.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkFabric_AXI4.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkGPR_RegFile.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkIntMul_32.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkIntMul_64.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkMMU_Cache.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkMem_Controller.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkMem_Model.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkNear_Mem.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkPLIC_16_2_7.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkRISCV_MBox.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkSoC_Map.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkSoC_Top.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkTop_HW_Side.v builds/RV64ACIMU_Flute_iverilog/Verilog_RTL/mkUART.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkAXI4_Deburster_A.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkBoot_ROM.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkBranch_Predictor.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkCPU.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkCSR_MIE.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkCSR_MIP.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkCSR_RegFile.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkCore.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkFabric.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkFabric_2x3.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkFabric_AXI4.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkGPR_RegFile.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkIntMul_32.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkIntMul_64.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkMMU_Cache.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkMem_Controller.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkMem_Model.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkNear_Mem.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkNear_Mem_IO.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkNear_Mem_IO_AXI4.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkPLIC_16_2_7.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkRISCV_MBox.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkSoC_Map.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkSoC_Top.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkTop_HW_Side.v builds/RV64ACIMU_Flute_verilator/Verilog_RTL/mkUART.v builds/Resources/Verilator_resources/import_DPI_C_decls.v src_SSITH_P2/Verilog_RTL/mkAxiLowPower.v src_SSITH_P2/Verilog_RTL/mkBranch_Predictor.v src_SSITH_P2/Verilog_RTL/mkCPU.v src_SSITH_P2/Verilog_RTL/mkCSR_MIE.v src_SSITH_P2/Verilog_RTL/mkCSR_MIP.v src_SSITH_P2/Verilog_RTL/mkCSR_RegFile.v src_SSITH_P2/Verilog_RTL/mkCache.v src_SSITH_P2/Verilog_RTL/mkCore.v src_SSITH_P2/Verilog_RTL/mkDM_Abstract_Commands.v src_SSITH_P2/Verilog_RTL/mkDM_CSR_Tap.v src_SSITH_P2/Verilog_RTL/mkDM_FPR_Tap.v src_SSITH_P2/Verilog_RTL/mkDM_GPR_Tap.v src_SSITH_P2/Verilog_RTL/mkDM_Mem_Tap.v src_SSITH_P2/Verilog_RTL/mkDM_Run_Control.v src_SSITH_P2/Verilog_RTL/mkDM_System_Bus.v src_SSITH_P2/Verilog_RTL/mkD_MMU_Cache.v src_SSITH_P2/Verilog_RTL/mkDebug_Module.v src_SSITH_P2/Verilog_RTL/mkDma_Server_Mux.v src_SSITH_P2/Verilog_RTL/mkDma_Server_Mux_Fabric.v src_SSITH_P2/Verilog_RTL/mkFBox_Core.v src_SSITH_P2/Verilog_RTL/mkFBox_Top.v src_SSITH_P2/Verilog_RTL/mkFPR_RegFile.v src_SSITH_P2/Verilog_RTL/mkFPU.v src_SSITH_P2/Verilog_RTL/mkFabric_1x3.v src_SSITH_P2/Verilog_RTL/mkGPR_RegFile.v src_SSITH_P2/Verilog_RTL/mkI_MMU_Cache.v src_SSITH_P2/Verilog_RTL/mkIntMul_32.v src_SSITH_P2/Verilog_RTL/mkIntMul_64.v src_SSITH_P2/Verilog_RTL/mkJtagTap.v src_SSITH_P2/Verilog_RTL/mkLLCache.v src_SSITH_P2/Verilog_RTL/mkLLPipeline.v src_SSITH_P2/Verilog_RTL/mkLastLvCRqMshr.v src_SSITH_P2/Verilog_RTL/mkMMIO.v src_SSITH_P2/Verilog_RTL/mkMMIO_AXI4_Adapter_2.v src_SSITH_P2/Verilog_RTL/mkNear_Mem.v src_SSITH_P2/Verilog_RTL/mkNear_Mem_IO_AXI4.v src_SSITH_P2/Verilog_RTL/mkP2_Core.v src_SSITH_P2/Verilog_RTL/mkPLIC_16_2_7.v src_SSITH_P2/Verilog_RTL/mkPTW.v src_SSITH_P2/Verilog_RTL/mkRISCV_MBox.v src_SSITH_P2/Verilog_RTL/mkSoC_Map.v src_SSITH_P2/Verilog_RTL/mkTLB.v src_SSITH_P2/Verilog_RTL/mkTLM2Source.v src_SSITH_P2/Verilog_RTL/mkTV_Encode.v src_SSITH_P2/Verilog_RTL/mkTV_Xactor.v src_SSITH_P2/xilinx_ip/hdl/ASSIGN1.v src_SSITH_P2/xilinx_ip/hdl/BRAM2.v src_SSITH_P2/xilinx_ip/hdl/ClockGen.v src_SSITH_P2/xilinx_ip/hdl/FIFO1.v src_SSITH_P2/xilinx_ip/hdl/FIFO2.v src_SSITH_P2/xilinx_ip/hdl/FIFO20.v src_SSITH_P2/xilinx_ip/hdl/FIFOL1.v src_SSITH_P2/xilinx_ip/hdl/MakeClock.v src_SSITH_P2/xilinx_ip/hdl/RegFile.v src_SSITH_P2/xilinx_ip/hdl/SizedFIFO.v src_SSITH_P2/xilinx_ip/hdl/SizedFIFO0.v src_SSITH_P2/xilinx_ip/hdl/SyncFIFOLevel.v src_SSITH_P2/xilinx_ip/hdl/SyncHandshake.v src_SSITH_P2/xilinx_ip/hdl/SyncResetA.v src_SSITH_P2/xilinx_ip/hdl/SyncWire.v src_SSITH_P2/xilinx_ip/hdl/mkAxiLowPower.v src_SSITH_P2/xilinx_ip/hdl/mkBranch_Predictor.v src_SSITH_P2/xilinx_ip/hdl/mkCPU.v src_SSITH_P2/xilinx_ip/hdl/mkCSR_MIE.v src_SSITH_P2/xilinx_ip/hdl/mkCSR_MIP.v src_SSITH_P2/xilinx_ip/hdl/mkCSR_RegFile.v src_SSITH_P2/xilinx_ip/hdl/mkCache.v src_SSITH_P2/xilinx_ip/hdl/mkCore.v src_SSITH_P2/xilinx_ip/hdl/mkDM_Abstract_Commands.v src_SSITH_P2/xilinx_ip/hdl/mkDM_CSR_Tap.v src_SSITH_P2/xilinx_ip/hdl/mkDM_FPR_Tap.v src_SSITH_P2/xilinx_ip/hdl/mkDM_GPR_Tap.v src_SSITH_P2/xilinx_ip/hdl/mkDM_Mem_Tap.v src_SSITH_P2/xilinx_ip/hdl/mkDM_Run_Control.v src_SSITH_P2/xilinx_ip/hdl/mkDM_System_Bus.v src_SSITH_P2/xilinx_ip/hdl/mkD_MMU_Cache.v src_SSITH_P2/xilinx_ip/hdl/mkDebug_Module.v src_SSITH_P2/xilinx_ip/hdl/mkDma_Server_Mux.v src_SSITH_P2/xilinx_ip/hdl/mkDma_Server_Mux_Fabric.v src_SSITH_P2/xilinx_ip/hdl/mkFBox_Core.v src_SSITH_P2/xilinx_ip/hdl/mkFBox_Top.v src_SSITH_P2/xilinx_ip/hdl/mkFPR_RegFile.v src_SSITH_P2/xilinx_ip/hdl/mkFPU.v src_SSITH_P2/xilinx_ip/hdl/mkFabric_1x3.v src_SSITH_P2/xilinx_ip/hdl/mkFabric_2x3.v src_SSITH_P2/xilinx_ip/hdl/mkGPR_RegFile.v src_SSITH_P2/xilinx_ip/hdl/mkI_MMU_Cache.v src_SSITH_P2/xilinx_ip/hdl/mkIntMul_32.v src_SSITH_P2/xilinx_ip/hdl/mkIntMul_64.v src_SSITH_P2/xilinx_ip/hdl/mkJtagTap.v src_SSITH_P2/xilinx_ip/hdl/mkLLCache.v src_SSITH_P2/xilinx_ip/hdl/mkLLPipeline.v src_SSITH_P2/xilinx_ip/hdl/mkLastLvCRqMshr.v src_SSITH_P2/xilinx_ip/hdl/mkMMIO.v src_SSITH_P2/xilinx_ip/hdl/mkMMIO_AXI4_Adapter_2.v src_SSITH_P2/xilinx_ip/hdl/mkMMU_Cache.v src_SSITH_P2/xilinx_ip/hdl/mkNear_Mem.v src_SSITH_P2/xilinx_ip/hdl/mkNear_Mem_IO_AXI4.v src_SSITH_P2/xilinx_ip/hdl/mkP2_Core.v src_SSITH_P2/xilinx_ip/hdl/mkPLIC_16_2_7.v src_SSITH_P2/xilinx_ip/hdl/mkPTW.v src_SSITH_P2/xilinx_ip/hdl/mkRISCV_MBox.v src_SSITH_P2/xilinx_ip/hdl/mkSoC_Map.v src_SSITH_P2/xilinx_ip/hdl/mkTLB.v src_SSITH_P2/xilinx_ip/hdl/mkTLM2Source.v src_SSITH_P2/xilinx_ip/hdl/mkTV_Encode.v src_SSITH_P2/xilinx_ip/hdl/mkTV_Xactor.v src_bsc_lib_RTL/BRAM1BE.v src_bsc_lib_RTL/BRAM1BELoad.v src_bsc_lib_RTL/BRAM2.v src_bsc_lib_RTL/BRAM2BE.v src_bsc_lib_RTL/BRAM2BELoad.v src_bsc_lib_RTL/FIFO1.v src_bsc_lib_RTL/FIFO10.v src_bsc_lib_RTL/FIFO2.v src_bsc_lib_RTL/FIFO20.v src_bsc_lib_RTL/FIFOL1.v src_bsc_lib_RTL/MakeResetA.v src_bsc_lib_RTL/RegFile.v src_bsc_lib_RTL/RegFileLoad.v src_bsc_lib_RTL/ResetInverter.v src_bsc_lib_RTL/RevertReg.v src_bsc_lib_RTL/SizedFIFO.v src_bsc_lib_RTL/SizedFIFO0.v src_bsc_lib_RTL/SyncFIFO.v src_bsc_lib_RTL/SyncFIFO0.v src_bsc_lib_RTL/SyncResetA.v src_bsc_lib_RTL/main.v "
                }
            }
        }

         stage('Utilities')  {
            steps {
                dir("Flute") {
                    sh "python3 /eda/processor_ci/core/labeler_prototype.py -d \$(pwd) -c /eda/processor_ci/config -o /jenkins/processor_ci_utils/labels"
                }            
            }
        }

        stage('FPGA Build Pipeline') {
            parallel {
                
                stage('digilent_arty_a7_100t') {
                    options {
                        lock(resource: 'digilent_arty_a7_100t')
                    }
                    stages {
                        stage('Synthesis and PnR') {
                            steps {
                                dir("Flute") {
                                    echo 'Starting synthesis for FPGA digilent_arty_a7_100t.'
                                sh 'python3 /eda/processor_ci/main.py -c /eda/processor_ci/config \
                                            -p Flute -b digilent_arty_a7_100t'
                                }
                            }
                        }
                        stage('Flash digilent_arty_a7_100t') {
                            steps {
                                dir("Flute") {
                                    echo 'Flashing FPGA digilent_arty_a7_100t.'
                                sh 'python3 /eda/processor_ci/main.py -c /eda/processor_ci/config \
                                            -p Flute -b digilent_arty_a7_100t -l'
                                }
                            }
                        }
                        stage('Test digilent_arty_a7_100t') {
                            steps {
                                echo 'Testing FPGA digilent_arty_a7_100t.'
                                sh 'echo "Test for FPGA in /dev/ttyUSB1"'
                                sh 'python3 /eda/processor_ci_tests/main.py -b 115200 -s 2 -c                                /eda/processor_ci_tests/config.json --p /dev/ttyUSB1 -m rv32i -k 0x41525459 '
                            }
                        }
                    }
                }
            }
        }
    }
    post {
        always {
            junit '**/*.xml'
        }
    }
}
