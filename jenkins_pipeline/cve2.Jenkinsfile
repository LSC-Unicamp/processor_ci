
pipeline {
    agent any
    stages {
        stage('Git Clone') {
            steps {
                sh 'rm -rf cve2'
                sh 'git clone --recursive --depth=1 https://github.com/openhwgroup/cve2 cve2'
            }
        }

        

        stage('Simulation') {
            steps {
                dir("cve2") {
                    sh "/eda/oss-cad-suite/bin/iverilog -o simulation.out -g2005                  -s   syn/rtl/cve2_clock_gating.v syn/rtl/latch_map.v syn/rtl/prim_clock_gating.v bhv/cve2_sim_clock_gate.sv dv/riscv_compliance/rtl/cve2_riscv_compliance.sv examples/obi2ahb/obi2ahbm_adapter.sv rtl/cve2_alu.sv rtl/cve2_branch_predict.sv rtl/cve2_compressed_decoder.sv rtl/cve2_controller.sv rtl/cve2_core.sv rtl/cve2_counter.sv rtl/cve2_cs_registers.sv rtl/cve2_csr.sv rtl/cve2_decoder.sv rtl/cve2_ex_block.sv rtl/cve2_fetch_fifo.sv rtl/cve2_id_stage.sv rtl/cve2_if_stage.sv rtl/cve2_load_store_unit.sv rtl/cve2_multdiv_fast.sv rtl/cve2_multdiv_slow.sv rtl/cve2_pkg.sv rtl/cve2_pmp.sv rtl/cve2_prefetch_buffer.sv rtl/cve2_register_file_ff.sv rtl/cve2_top.sv rtl/cve2_top_tracing.sv rtl/cve2_tracer.sv rtl/cve2_tracer_pkg.sv rtl/cve2_wb.sv shared/rtl/bus.sv shared/rtl/ram_1p.sv shared/rtl/ram_2p.sv shared/rtl/timer.sv shared/rtl/fpga/xilinx/clkgen_xil7series.sv vendor/google_riscv-dv/src/riscv_amo_instr_lib.sv vendor/google_riscv-dv/src/riscv_asm_program_gen.sv vendor/google_riscv-dv/src/riscv_callstack_gen.sv vendor/google_riscv-dv/src/riscv_data_page_gen.sv vendor/google_riscv-dv/src/riscv_debug_rom_gen.sv vendor/google_riscv-dv/src/riscv_directed_instr_lib.sv vendor/google_riscv-dv/src/riscv_illegal_instr.sv vendor/google_riscv-dv/src/riscv_instr_cover_group.sv vendor/google_riscv-dv/src/riscv_instr_gen_config.sv vendor/google_riscv-dv/src/riscv_instr_pkg.sv vendor/google_riscv-dv/src/riscv_instr_sequence.sv vendor/google_riscv-dv/src/riscv_instr_stream.sv vendor/google_riscv-dv/src/riscv_load_store_instr_lib.sv vendor/google_riscv-dv/src/riscv_loop_instr.sv vendor/google_riscv-dv/src/riscv_page_table.sv vendor/google_riscv-dv/src/riscv_page_table_entry.sv vendor/google_riscv-dv/src/riscv_page_table_exception_cfg.sv vendor/google_riscv-dv/src/riscv_page_table_list.sv vendor/google_riscv-dv/src/riscv_pmp_cfg.sv vendor/google_riscv-dv/src/riscv_privil_reg.sv vendor/google_riscv-dv/src/riscv_privileged_common_seq.sv vendor/google_riscv-dv/src/riscv_pseudo_instr.sv vendor/google_riscv-dv/src/riscv_reg.sv vendor/google_riscv-dv/src/riscv_signature_pkg.sv vendor/google_riscv-dv/src/riscv_vector_cfg.sv vendor/google_riscv-dv/src/isa/riscv_amo_instr.sv vendor/google_riscv-dv/src/isa/riscv_b_instr.sv vendor/google_riscv-dv/src/isa/riscv_compressed_instr.sv vendor/google_riscv-dv/src/isa/riscv_floating_point_instr.sv vendor/google_riscv-dv/src/isa/riscv_instr.sv vendor/google_riscv-dv/src/isa/riscv_vector_instr.sv vendor/google_riscv-dv/src/isa/riscv_zba_instr.sv vendor/google_riscv-dv/src/isa/riscv_zbb_instr.sv vendor/google_riscv-dv/src/isa/riscv_zbc_instr.sv vendor/google_riscv-dv/src/isa/riscv_zbs_instr.sv vendor/google_riscv-dv/src/isa/rv128c_instr.sv vendor/google_riscv-dv/src/isa/rv32a_instr.sv vendor/google_riscv-dv/src/isa/rv32b_instr.sv vendor/google_riscv-dv/src/isa/rv32c_instr.sv vendor/google_riscv-dv/src/isa/rv32d_instr.sv vendor/google_riscv-dv/src/isa/rv32dc_instr.sv vendor/google_riscv-dv/src/isa/rv32f_instr.sv vendor/google_riscv-dv/src/isa/rv32fc_instr.sv vendor/google_riscv-dv/src/isa/rv32i_instr.sv vendor/google_riscv-dv/src/isa/rv32m_instr.sv vendor/google_riscv-dv/src/isa/rv32v_instr.sv vendor/google_riscv-dv/src/isa/rv32zba_instr.sv vendor/google_riscv-dv/src/isa/rv32zbb_instr.sv vendor/google_riscv-dv/src/isa/rv32zbc_instr.sv vendor/google_riscv-dv/src/isa/rv32zbs_instr.sv vendor/google_riscv-dv/src/isa/rv64a_instr.sv vendor/google_riscv-dv/src/isa/rv64b_instr.sv vendor/google_riscv-dv/src/isa/rv64c_instr.sv vendor/google_riscv-dv/src/isa/rv64d_instr.sv vendor/google_riscv-dv/src/isa/rv64f_instr.sv vendor/google_riscv-dv/src/isa/rv64i_instr.sv vendor/google_riscv-dv/src/isa/rv64m_instr.sv vendor/google_riscv-dv/src/isa/rv64zba_instr.sv vendor/google_riscv-dv/src/isa/rv64zbb_instr.sv vendor/google_riscv-dv/src/isa/custom/riscv_custom_instr.sv vendor/google_riscv-dv/src/isa/custom/riscv_custom_instr_enum.sv vendor/google_riscv-dv/src/isa/custom/rv32x_instr.sv vendor/google_riscv-dv/src/isa/custom/rv64x_instr.sv vendor/google_riscv-dv/target/ml/riscv_core_setting.sv vendor/google_riscv-dv/target/multi_harts/riscv_core_setting.sv vendor/google_riscv-dv/target/rv32i/riscv_core_setting.sv vendor/google_riscv-dv/target/rv32imafdc/riscv_core_setting.sv vendor/google_riscv-dv/target/rv32imc/riscv_core_setting.sv vendor/google_riscv-dv/target/rv32imc_sv32/riscv_core_setting.sv vendor/google_riscv-dv/target/rv32imcb/riscv_core_setting.sv vendor/google_riscv-dv/target/rv64gc/riscv_core_setting.sv vendor/google_riscv-dv/target/rv64gcv/riscv_core_setting.sv vendor/google_riscv-dv/target/rv64imc/riscv_core_setting.sv vendor/google_riscv-dv/target/rv64imcb/riscv_core_setting.sv vendor/lowrisc_ip/dv/sv/common_ifs/clk_if.sv vendor/lowrisc_ip/dv/sv/common_ifs/clk_rst_if.sv vendor/lowrisc_ip/dv/sv/common_ifs/pins_if.sv vendor/lowrisc_ip/dv/sv/common_ifs/rst_shadowed_if.sv vendor/lowrisc_ip/dv/sv/csr_utils/csr_seq_lib.sv vendor/lowrisc_ip/dv/sv/csr_utils/csr_utils_pkg.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/csr_excl_item.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_lockable_field_cov.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_mem.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_mubi_cov.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_reg.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_reg_block.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_reg_field.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_reg_map.sv vendor/lowrisc_ip/dv/sv/dv_base_reg/dv_base_reg_pkg.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_agent.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_agent_cfg.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_agent_cov.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_driver.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_env.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_env_cfg.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_env_cov.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_monitor.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_scoreboard.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_seq.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_sequencer.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_virtual_sequencer.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_vseq.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_lib_pkg.sv vendor/lowrisc_ip/dv/sv/dv_utils/dv_report_catcher.sv vendor/lowrisc_ip/dv/sv/dv_utils/dv_report_server.sv vendor/lowrisc_ip/dv/sv/dv_utils/dv_utils_pkg.sv vendor/lowrisc_ip/dv/sv/dv_utils/dv_vif_wrap.sv vendor/lowrisc_ip/dv/sv/mem_bkdr_util/mem_bkdr_util.sv vendor/lowrisc_ip/dv/sv/mem_bkdr_util/mem_bkdr_util__otp.sv vendor/lowrisc_ip/dv/sv/mem_bkdr_util/mem_bkdr_util__rom.sv vendor/lowrisc_ip/dv/sv/mem_bkdr_util/mem_bkdr_util__sram.sv vendor/lowrisc_ip/dv/sv/mem_bkdr_util/mem_bkdr_util_pkg.sv vendor/lowrisc_ip/dv/sv/mem_bkdr_util/otp_scrambler_pkg.sv vendor/lowrisc_ip/dv/sv/mem_bkdr_util/sram_scrambler_pkg.sv vendor/lowrisc_ip/dv/sv/mem_model/mem_model.sv vendor/lowrisc_ip/dv/sv/mem_model/mem_model_pkg.sv vendor/lowrisc_ip/dv/sv/str_utils/str_utils_pkg.sv vendor/lowrisc_ip/ip/prim/dv/prim_present/crypto_dpi_present/crypto_dpi_present_pkg.sv vendor/lowrisc_ip/ip/prim/dv/prim_prince/crypto_dpi_prince/crypto_dpi_prince_pkg.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_alert_rxtx_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_alert_rxtx_async_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_esc_rxtx_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_fifo_sync_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_22_16_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_28_22_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_39_32_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_64_57_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_72_64_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_hamming_22_16_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_hamming_39_32_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_hamming_72_64_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_hamming_76_68_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_22_16_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_28_22_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_39_32_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_64_57_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_72_64_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_hamming_22_16_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_hamming_39_32_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_hamming_72_64_assert_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/vip/prim_secded_inv_hamming_76_68_assert_fpv.sv vendor/lowrisc_ip/ip/prim/pre_dv/prim_crc32/prim_crc32_sim.sv vendor/lowrisc_ip/ip/prim/rtl/prim_alert_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_alert_receiver.sv vendor/lowrisc_ip/ip/prim/rtl/prim_alert_sender.sv vendor/lowrisc_ip/ip/prim/rtl/prim_arbiter_fixed.sv vendor/lowrisc_ip/ip/prim/rtl/prim_arbiter_ppc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_arbiter_tree.sv vendor/lowrisc_ip/ip/prim/rtl/prim_assert.sv vendor/lowrisc_ip/ip/prim/rtl/prim_cdc_rand_delay.sv vendor/lowrisc_ip/ip/prim/rtl/prim_cipher_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_clock_div.sv vendor/lowrisc_ip/ip/prim/rtl/prim_clock_gating_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_clock_meas.sv vendor/lowrisc_ip/ip/prim/rtl/prim_clock_timeout.sv vendor/lowrisc_ip/ip/prim/rtl/prim_count.sv vendor/lowrisc_ip/ip/prim/rtl/prim_count_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_crc32.sv vendor/lowrisc_ip/ip/prim/rtl/prim_diff_decode.sv vendor/lowrisc_ip/ip/prim/rtl/prim_dom_and_2share.sv vendor/lowrisc_ip/ip/prim/rtl/prim_double_lfsr.sv vendor/lowrisc_ip/ip/prim/rtl/prim_edge_detector.sv vendor/lowrisc_ip/ip/prim/rtl/prim_edn_req.sv vendor/lowrisc_ip/ip/prim/rtl/prim_esc_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_esc_receiver.sv vendor/lowrisc_ip/ip/prim/rtl/prim_esc_sender.sv vendor/lowrisc_ip/ip/prim/rtl/prim_fifo_async.sv vendor/lowrisc_ip/ip/prim/rtl/prim_fifo_async_sram_adapter.sv vendor/lowrisc_ip/ip/prim/rtl/prim_fifo_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_filter.sv vendor/lowrisc_ip/ip/prim/rtl/prim_filter_ctr.sv vendor/lowrisc_ip/ip/prim/rtl/prim_flop_2sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_gate_gen.sv vendor/lowrisc_ip/ip/prim/rtl/prim_gf_mult.sv vendor/lowrisc_ip/ip/prim/rtl/prim_intr_hw.sv vendor/lowrisc_ip/ip/prim/rtl/prim_keccak.sv vendor/lowrisc_ip/ip/prim/rtl/prim_lc_combine.sv vendor/lowrisc_ip/ip/prim/rtl/prim_lc_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_lc_sender.sv vendor/lowrisc_ip/ip/prim/rtl/prim_lc_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_lfsr.sv vendor/lowrisc_ip/ip/prim/rtl/prim_max_tree.sv vendor/lowrisc_ip/ip/prim/rtl/prim_msb_extend.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi12_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi12_sender.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi12_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi16_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi16_sender.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi16_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi4_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi4_sender.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi4_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi8_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi8_sender.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi8_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_mubi_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_multibit_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_otp_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_packer.sv vendor/lowrisc_ip/ip/prim/rtl/prim_packer_fifo.sv vendor/lowrisc_ip/ip/prim/rtl/prim_pad_wrapper_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_present.sv vendor/lowrisc_ip/ip/prim/rtl/prim_prince.sv vendor/lowrisc_ip/ip/prim/rtl/prim_pulse_sync.sv vendor/lowrisc_ip/ip/prim/rtl/prim_ram_1p_adv.sv vendor/lowrisc_ip/ip/prim/rtl/prim_ram_1p_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_ram_1p_scr.sv vendor/lowrisc_ip/ip/prim/rtl/prim_ram_2p_adv.sv vendor/lowrisc_ip/ip/prim/rtl/prim_ram_2p_async_adv.sv vendor/lowrisc_ip/ip/prim/rtl/prim_ram_2p_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_reg_cdc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_rom_adv.sv vendor/lowrisc_ip/ip/prim/rtl/prim_rom_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sec_anchor_buf.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sec_anchor_flop.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_22_16_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_22_16_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_28_22_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_28_22_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_39_32_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_39_32_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_64_57_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_64_57_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_72_64_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_72_64_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_22_16_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_22_16_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_39_32_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_39_32_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_72_64_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_72_64_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_76_68_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_hamming_76_68_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_22_16_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_22_16_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_28_22_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_28_22_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_39_32_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_39_32_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_64_57_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_64_57_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_72_64_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_72_64_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_22_16_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_22_16_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_39_32_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_39_32_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_72_64_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_72_64_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_76_68_dec.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_inv_hamming_76_68_enc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_secded_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_slicer.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sparse_fsm_flop.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sram_arbiter.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg_arb.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg_async.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg_cdc.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg_ext.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg_ext_async.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subreg_shadow.sv vendor/lowrisc_ip/ip/prim/rtl/prim_subst_perm.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sum_tree.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sync_reqack.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sync_reqack_data.sv vendor/lowrisc_ip/ip/prim/rtl/prim_sync_slow_fast.sv vendor/lowrisc_ip/ip/prim/rtl/prim_util_pkg.sv vendor/lowrisc_ip/ip/prim/rtl/prim_xoshiro256pp.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_and2.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_buf.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_clock_buf.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_clock_gating.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_clock_inv.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_clock_mux2.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_flash.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_flash_bank.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_flop.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_flop_en.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_otp.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_pad_attr.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_pad_wrapper.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_ram_1p.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_ram_2p.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_rom.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_usb_diff_rx.sv vendor/lowrisc_ip/ip/prim_generic/rtl/prim_generic_xor2.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_and2.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_buf.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_clock_buf.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_clock_gating.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_clock_mux2.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_flop.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_flop_en.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_pad_attr.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_pad_wrapper.sv vendor/lowrisc_ip/ip/prim_xilinx/rtl/prim_xilinx_xor2.sv dv/riscv_compliance/rtl/riscv_testutil.sv formal/data_ind_timing/formal_tb.sv formal/icache/formal_tb.sv shared/rtl/sim/simulator_ctrl.sv vendor/google_riscv-dv/test/riscv_instr_base_test.sv vendor/google_riscv-dv/test/riscv_instr_cov_test.sv vendor/google_riscv-dv/test/riscv_instr_gen_tb_top.sv vendor/google_riscv-dv/test/riscv_instr_test.sv vendor/google_riscv-dv/test/riscv_instr_test_lib.sv vendor/google_riscv-dv/test/riscv_instr_test_pkg.sv vendor/lowrisc_ip/dv/sv/dv_lib/dv_base_test.sv vendor/lowrisc_ip/dv/sv/dv_utils/dv_test_status_pkg.sv vendor/lowrisc_ip/ip/prim/dv/prim_alert/tb/prim_alert_tb.sv vendor/lowrisc_ip/ip/prim/dv/prim_esc/tb/prim_esc_tb.sv vendor/lowrisc_ip/ip/prim/dv/prim_lfsr/tb/prim_lfsr_tb.sv vendor/lowrisc_ip/ip/prim/dv/prim_present/tb/prim_present_tb.sv vendor/lowrisc_ip/ip/prim/dv/prim_prince/tb/prim_prince_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_async_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_async_fatal_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_async_fatal_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_async_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_fatal_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_fatal_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_alert_rxtx_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_arbiter_fixed_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_arbiter_ppc_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_arbiter_tree_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_count_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_esc_rxtx_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_esc_rxtx_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_fifo_async_sram_adapter_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_fifo_sync_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_fifo_sync_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_keccak_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_lfsr_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_packer_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_22_16_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_22_16_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_28_22_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_28_22_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_39_32_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_39_32_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_64_57_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_64_57_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_72_64_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_72_64_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_22_16_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_22_16_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_39_32_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_39_32_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_72_64_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_72_64_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_76_68_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_hamming_76_68_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_22_16_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_22_16_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_28_22_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_28_22_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_39_32_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_39_32_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_64_57_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_64_57_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_72_64_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_72_64_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_22_16_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_22_16_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_39_32_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_39_32_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_72_64_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_72_64_tb.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_76_68_bind_fpv.sv vendor/lowrisc_ip/ip/prim/fpv/tb/prim_secded_inv_hamming_76_68_tb.sv vendor/lowrisc_ip/ip/prim/pre_dv/prim_sync_reqack/rtl/prim_sync_reqack_tb.sv"
                }
            }
        }

         stage('Utilities')  {
            steps {
                dir("cve2") {
                    sh "python3 /eda/processor_ci/core/labeler_prototype.py -d \$(pwd) -c /eda/processor_ci/config.json -o /jenkins/processor_ci_utils/labels.json"
                }            
            }
        }

        stage('FPGA Build Pipeline') {
            parallel {
                
                stage('colorlight_i9') {
                    options {
                        lock(resource: 'colorlight_i9')
                    }
                    stages {
                        stage('Synthesis and PnR') {
                            steps {
                                dir("cve2") {
                                    echo 'Starting synthesis for FPGA colorlight_i9.'
                                sh 'python3 /eda/processor_ci/main.py -c /eda/processor_ci/config.json \
                                            -p cve2 -b colorlight_i9'
                                }
                            }
                        }
                        stage('Flash colorlight_i9') {
                            steps {
                                dir("cve2") {
                                    echo 'Flashing FPGA colorlight_i9.'
                                sh 'python3 /eda/processor_ci/main.py -c /eda/processor_ci/config.json \
                                            -p cve2 -b colorlight_i9 -l'
                                }
                            }
                        }
                        stage('Test colorlight_i9') {
                            steps {
                                echo 'Testing FPGA colorlight_i9.'
                                dir("cve2") {
                                    sh 'echo "Test for FPGA in /dev/ttyACM0"'
                                }
                            }
                        }
                    }
                }
                
                stage('digilent_nexys4_ddr') {
                    options {
                        lock(resource: 'digilent_nexys4_ddr')
                    }
                    stages {
                        stage('Synthesis and PnR') {
                            steps {
                                dir("cve2") {
                                    echo 'Starting synthesis for FPGA digilent_nexys4_ddr.'
                                sh 'python3 /eda/processor_ci/main.py -c /eda/processor_ci/config.json \
                                            -p cve2 -b digilent_nexys4_ddr'
                                }
                            }
                        }
                        stage('Flash digilent_nexys4_ddr') {
                            steps {
                                dir("cve2") {
                                    echo 'Flashing FPGA digilent_nexys4_ddr.'
                                sh 'python3 /eda/processor_ci/main.py -c /eda/processor_ci/config.json \
                                            -p cve2 -b digilent_nexys4_ddr -l'
                                }
                            }
                        }
                        stage('Test digilent_nexys4_ddr') {
                            steps {
                                echo 'Testing FPGA digilent_nexys4_ddr.'
                                dir("cve2") {
                                    sh 'echo "Test for FPGA in /dev/ttyUSB1"'
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    post {
        always {
            junit '**/test-reports/*.xml'
        }
    }
}
